import{_ as t,r as D,o as r,c as y,b as s,a as p,w as l,d as a,e as i}from"./app-q2I5CAs-.js";const d={},C=s("h1",{id:"docker-搭建-mysql-环境",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#docker-搭建-mysql-环境","aria-hidden":"true"},"#"),a(" Docker 搭建 MySQL 环境")],-1),E={class:"table-of-contents"},u=i(`<h2 id="1-基本使用" tabindex="-1"><a class="header-anchor" href="#1-基本使用" aria-hidden="true">#</a> 1. 基本使用</h2><p>将 <code>root_password</code> 替换为自己的密码，然后执行以下命令：</p><div class="language-bash" data-ext="sh"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;">docker</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">pull</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">mysql:8.0.32</span></span>
<span class="line"><span style="color:#DCDCAA;">docker</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">run</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">-itd</span><span style="color:#D4D4D4;"> </span><span style="color:#D7BA7D;">\\</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">--name</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">mysql80</span><span style="color:#D4D4D4;"> </span><span style="color:#D7BA7D;">\\</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">-p</span><span style="color:#D4D4D4;"> </span><span style="color:#B5CEA8;">3306</span><span style="color:#CE9178;">:3306</span><span style="color:#D4D4D4;"> </span><span style="color:#D7BA7D;">\\</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">-e</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">MYSQL_ROOT_PASSWORD=root_password</span><span style="color:#D4D4D4;"> </span><span style="color:#D7BA7D;">\\</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">-e</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">MYSQL_ROOT_HOST=%</span><span style="color:#D4D4D4;"> </span><span style="color:#D7BA7D;">\\</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">-e</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">TZ=Asia/Shanghai</span><span style="color:#D4D4D4;"> </span><span style="color:#D7BA7D;">\\</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#CE9178;">mysql:8.0.32</span></span>
<span class="line"></span></code></pre></div><p>进入容器：</p><div class="language-bash" data-ext="sh"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;">docker</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">exec</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">-it</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">mysql80</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">/bin/bash</span></span>
<span class="line"></span></code></pre></div><h2 id="2-权限问题" tabindex="-1"><a class="header-anchor" href="#2-权限问题" aria-hidden="true">#</a> 2. 权限问题</h2><p>外部无法连接，报错：</p><div class="language-bash" data-ext="sh"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;">Access</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">denied</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">for</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">user</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&#39;root&#39;@&#39;172.17.0.1&#39;</span><span style="color:#D4D4D4;"> (using </span><span style="color:#CE9178;">password:</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">YES</span><span style="color:#D4D4D4;">)</span><span style="color:#CE9178;">&quot;)</span></span>
<span class="line"></span></code></pre></div><p>原因：容器内部的 MySQL 服务没有对外部连接授权，需要授权。</p><p>如果没有创建容器或需要新建容器，可以指定 <code>MYSQL_ROOT_HOST</code> 的值为 <code>%</code>，这样容器内部的 MySQL 服务就会对外部连接授权。</p><div class="language-bash" data-ext="sh"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;">docker</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">run</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">-itd</span><span style="color:#D4D4D4;"> </span><span style="color:#D7BA7D;">\\</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">--name</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">mysql80</span><span style="color:#D4D4D4;"> </span><span style="color:#D7BA7D;">\\</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">-p</span><span style="color:#D4D4D4;"> </span><span style="color:#B5CEA8;">3306</span><span style="color:#CE9178;">:3306</span><span style="color:#D4D4D4;"> </span><span style="color:#D7BA7D;">\\</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">-e</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">MYSQL_ROOT_PASSWORD=root_password</span><span style="color:#D4D4D4;"> </span><span style="color:#D7BA7D;">\\</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">-e</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">MYSQL_ROOT_HOST=%</span><span style="color:#D4D4D4;"> </span><span style="color:#D7BA7D;">\\</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">-e</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">TZ=Asia/Shanghai</span><span style="color:#D4D4D4;"> </span><span style="color:#D7BA7D;">\\</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#CE9178;">mysql:8.0.32</span></span>
<span class="line"></span></code></pre></div><p>如果已经创建了容器，可以通过以下命令授权：</p>`,12),h=s("div",{class:"language-sql","data-ext":"sql"},[s("pre",{class:"shiki dark-plus",style:{"background-color":"#1E1E1E"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#569CD6"}},"GRANT"),s("span",{style:{color:"#D4D4D4"}}," ALL PRIVILEGES "),s("span",{style:{color:"#569CD6"}},"ON"),s("span",{style:{color:"#D4D4D4"}}," *.* "),s("span",{style:{color:"#569CD6"}},"TO"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"'root'"),s("span",{style:{color:"#D4D4D4"}},"@"),s("span",{style:{color:"#CE9178"}},"'%'"),s("span",{style:{color:"#D4D4D4"}}," IDENTIFIED "),s("span",{style:{color:"#569CD6"}},"BY"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"'password'"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#569CD6"}},"WITH"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#569CD6"}},"GRANT"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#569CD6"}},"OPTION"),s("span",{style:{color:"#D4D4D4"}},";")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4"}},"FLUSH PRIVILEGES;")]),a(`
`),s("span",{class:"line"})])])],-1),_=s("div",{class:"language-sql","data-ext":"sql"},[s("pre",{class:"shiki dark-plus",style:{"background-color":"#1E1E1E"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#569CD6"}},"ALTER"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#569CD6"}},"USER"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"'root'"),s("span",{style:{color:"#D4D4D4"}},"@"),s("span",{style:{color:"#CE9178"}},"'%'"),s("span",{style:{color:"#D4D4D4"}}," IDENTIFIED "),s("span",{style:{color:"#569CD6"}},"WITH"),s("span",{style:{color:"#D4D4D4"}}," mysql_native_password "),s("span",{style:{color:"#569CD6"}},"BY"),s("span",{style:{color:"#D4D4D4"}}," "),s("span",{style:{color:"#CE9178"}},"'password'"),s("span",{style:{color:"#D4D4D4"}},";")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4"}},"FLUSH PRIVILEGES;")]),a(`
`),s("span",{class:"line"})])])],-1);function A(k,S){const e=D("router-link"),c=D("CodeTabs");return r(),y("div",null,[C,s("nav",E,[s("ul",null,[s("li",null,[p(e,{to:"#1-基本使用"},{default:l(()=>[a("1. 基本使用")]),_:1})]),s("li",null,[p(e,{to:"#2-权限问题"},{default:l(()=>[a("2. 权限问题")]),_:1})])])]),u,p(c,{id:"34",data:[{id:"MySQL 5.7"},{id:"MySQL 8.0"}],"tab-id":"mysql"},{title0:l(({value:n,isActive:o})=>[a("MySQL 5.7")]),title1:l(({value:n,isActive:o})=>[a("MySQL 8.0")]),tab0:l(({value:n,isActive:o})=>[h]),tab1:l(({value:n,isActive:o})=>[_]),_:1})])}const v=t(d,[["render",A],["__file","mysql-env.html.vue"]]);export{v as default};
