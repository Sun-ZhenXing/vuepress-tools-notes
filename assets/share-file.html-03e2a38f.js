import{_ as e,r as o,o as c,c as i,b as s,a as l,w as p,d as n,e as r}from"./app-cc07cb32.js";const t={},D=s("h1",{id:"共享文件",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#共享文件","aria-hidden":"true"},"#"),n(" 共享文件")],-1),d={class:"table-of-contents"},y=r(`<h2 id="_1-开启-http-服务" tabindex="-1"><a class="header-anchor" href="#_1-开启-http-服务" aria-hidden="true">#</a> 1. 开启 HTTP 服务</h2><h3 id="_1-1-使用-python" tabindex="-1"><a class="header-anchor" href="#_1-1-使用-python" aria-hidden="true">#</a> 1.1 使用 Python</h3><p>Python3 自带 HTTP 服务器，但速度慢于下面要介绍的 Nginx 和 <code>http-server</code> 服务器程序。</p><p>安装 Python3：</p><div class="language-bash" data-ext="sh"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;">pkg</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">install</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">python</span></span>
<span class="line"></span></code></pre></div><p>启动服务器：</p><div class="language-bash" data-ext="sh"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;">python</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">-m</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">http.server</span><span style="color:#D4D4D4;"> </span><span style="color:#B5CEA8;">8888</span></span>
<span class="line"></span></code></pre></div><h3 id="_1-2-使用-nginx" tabindex="-1"><a class="header-anchor" href="#_1-2-使用-nginx" aria-hidden="true">#</a> 1.2 使用 Nginx</h3><p>Nginx 是目前速度最快的服务器程序之一。如果没有使用过 Nginx，您可以在网络上查找 Nginx 的资料，有大量配置 Nginx 的视频和文章。</p><p>安装 Nginx 的命令如下：</p><div class="language-bash" data-ext="sh"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;">pkg</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">install</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">nginx</span></span>
<span class="line"></span></code></pre></div><p>配置方式和传统的 Nginx 没有差别，除了配置文件在 <code>/data/data/com.termux/files/usr/etc/nginx/</code> 目录下面。</p><h3 id="_1-3-使用-http-server" tabindex="-1"><a class="header-anchor" href="#_1-3-使用-http-server" aria-hidden="true">#</a> 1.3 使用 http-server</h3><p><code>http-server</code> 是基于 Node.js 的 Web 文件服务器，所以需要安装 Node.js：</p><div class="language-bash" data-ext="sh"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#6A9955;"># 安装 Node.js</span></span>
<span class="line"><span style="color:#DCDCAA;">pkg</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">install</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">nodejs-lts</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># 安装 http-server</span></span>
<span class="line"><span style="color:#DCDCAA;">npm</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">i</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">-g</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">http-server</span></span>
<span class="line"></span></code></pre></div><p>启动服务器：</p><div class="language-bash" data-ext="sh"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;">http-server</span></span>
<span class="line"></span></code></pre></div><h2 id="_2-ftp-服务" tabindex="-1"><a class="header-anchor" href="#_2-ftp-服务" aria-hidden="true">#</a> 2. FTP 服务</h2><h3 id="_2-1-sftp-服务器" tabindex="-1"><a class="header-anchor" href="#_2-1-sftp-服务器" aria-hidden="true">#</a> 2.1 SFTP 服务器</h3><p>首先需要安装下面的组件：</p><div class="language-bash" data-ext="sh"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;">pkg</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">install</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">openssh</span></span>
<span class="line"><span style="color:#DCDCAA;">pkg</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">install</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">pure-ftpd</span></span>
<span class="line"></span></code></pre></div><p>为了能远程登录，需要知道用户名和密码，并开启 SSH 服务：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#6A9955;"># 查看 ip 地址</span></span>
<span class="line"><span style="color:#DCDCAA;">ip</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">addr</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># 查看用户名</span></span>
<span class="line"><span style="color:#DCDCAA;">whoami</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># （可选）修改密码，重复输入两遍即可</span></span>
<span class="line"><span style="color:#DCDCAA;">passwd</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># 启动 ssh  服务</span></span>
<span class="line"><span style="color:#DCDCAA;">sshd</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># 启动 SFTP 服务</span></span>
<span class="line"><span style="color:#DCDCAA;">pure-ftpd</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后可以在同一个局域网下，使用 SFTP 协议登录手机 IP。用户名为 <code>$(whoami)</code>，密码为刚才修改的密码，端口为 <code>8022</code>。登录成功即可远程管理手机上全部文件（必须是有权限的文件）。</p><p>使用 SFTP 协议复制、删除、移动文件的速度很快，实测传输超过 30 MB/s，快于 HTTP 服务器。</p><p><code>Ctrl+C</code> 即可中断服务，然后关闭 SSH 服务：</p><div class="language-bash" data-ext="sh"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;">pkill</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">sshd</span></span>
<span class="line"></span></code></pre></div><h2 id="_3-第三方应用" tabindex="-1"><a class="header-anchor" href="#_3-第三方应用" aria-hidden="true">#</a> 3. 第三方应用</h2><h3 id="_3-1-kodbox" tabindex="-1"><a class="header-anchor" href="#_3-1-kodbox" aria-hidden="true">#</a> 3.1 KodBox</h3><p>KodBox 是一款企业网盘应用，提供有限的免费支持版本，能满足大部分场景的个人文件管理需求。</p><p>需要安装 Nginx 和 PHP 扩展：</p><div class="language-bash" data-ext="sh"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;">pkg</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">install</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">nginx</span></span>
<span class="line"><span style="color:#DCDCAA;">pkg</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">install</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">php</span></span>
<span class="line"><span style="color:#DCDCAA;">pkg</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">install</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">php-fpm</span></span>
<span class="line"></span></code></pre></div><p>然后安装 KodBox，例如安装到 <code>/kod</code> 目录下：</p><div class="language-bash" data-ext="sh"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;">mkdir</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">kodbox</span><span style="color:#D4D4D4;"> &amp;&amp; </span><span style="color:#DCDCAA;">cd</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">kodbox</span></span>
<span class="line"><span style="color:#DCDCAA;">wget</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">https://static.kodcloud.com/update/download/kodbox.1.37.zip</span></span>
<span class="line"><span style="color:#DCDCAA;">unzip</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">kodbox.1.37.zip</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">-d</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">$PREFIX</span><span style="color:#CE9178;">/share/nginx/html/kod</span></span>
<span class="line"></span></code></pre></div><p>下面配置 Nginx 解析 PHP 文件。</p><div class="language-bash" data-ext="sh"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;">vim</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">$PREFIX</span><span style="color:#CE9178;">/etc/php-fpm.d/www.conf</span></span>
<span class="line"></span></code></pre></div><p>将 <code>listen = /data/data/com.termux/files/usr/var/run/php-fpm.sock</code> 修改为 <code>listen = 127.0.0.1:9000</code> 即可。</p><p>现在配置 Nginx：</p><div class="language-bash" data-ext="sh"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;">vim</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">$PREFIX</span><span style="color:#CE9178;">/etc/nginx/nginx.conf</span></span>
<span class="line"></span></code></pre></div><p>如果不了解 Nginx 如何配置 PHP 解析，可以参考下面的配置示例。</p><details class="hint-container details"><summary>Nginx 配置示例</summary><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#569CD6;">worker_processes </span><span style="color:#D4D4D4;"> auto;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">events</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#569CD6;"> worker_connections </span><span style="color:#D4D4D4;"> </span><span style="color:#B5CEA8;">1024</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">http</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#569CD6;"> include </span><span style="color:#D4D4D4;">      mime.types;</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#569CD6;"> default_type </span><span style="color:#D4D4D4;"> application/octet-stream;</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#569CD6;"> sendfile </span><span style="color:#D4D4D4;">      </span><span style="color:#569CD6;"> on</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#569CD6;"> keepalive_timeout </span><span style="color:#D4D4D4;"> </span><span style="color:#B5CEA8;">65</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">server</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">       </span><span style="color:#569CD6;"> listen </span><span style="color:#D4D4D4;">      </span><span style="color:#B5CEA8;">8080</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">       </span><span style="color:#569CD6;"> server_name </span><span style="color:#D4D4D4;"> localhost;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">location</span><span style="color:#D4D4D4;"> / {</span></span>
<span class="line"><span style="color:#D4D4D4;">           </span><span style="color:#569CD6;"> root </span><span style="color:#D4D4D4;">  /data/data/com.termux/files/usr/share/nginx/html;</span></span>
<span class="line"><span style="color:#D4D4D4;">           </span><span style="color:#569CD6;"> index </span><span style="color:#D4D4D4;"> index.html index.htm index.php;</span></span>
<span class="line"><span style="color:#D4D4D4;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">       </span><span style="color:#569CD6;"> error_page </span><span style="color:#D4D4D4;">  </span><span style="color:#B5CEA8;">500</span><span style="color:#D4D4D4;"> </span><span style="color:#B5CEA8;">502</span><span style="color:#D4D4D4;"> </span><span style="color:#B5CEA8;">503</span><span style="color:#D4D4D4;"> </span><span style="color:#B5CEA8;">504</span><span style="color:#D4D4D4;">  /50x.html;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">location</span><span style="color:#D4D4D4;"> = </span><span style="color:#D16969;">/50x.html </span><span style="color:#D4D4D4;">{</span></span>
<span class="line"><span style="color:#D4D4D4;">           </span><span style="color:#569CD6;"> root </span><span style="color:#D4D4D4;">  /data/data/com.termux/files/usr/share/nginx/html;</span></span>
<span class="line"><span style="color:#D4D4D4;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">location</span><span style="color:#D4D4D4;"> ~ </span><span style="color:#D16969;">\\.php$ </span><span style="color:#D4D4D4;">{</span></span>
<span class="line"><span style="color:#D4D4D4;">           </span><span style="color:#569CD6;"> root </span><span style="color:#D4D4D4;">          html;</span></span>
<span class="line"><span style="color:#D4D4D4;">           </span><span style="color:#569CD6;"> fastcgi_pass </span><span style="color:#D4D4D4;">  127.0.0.1:9000;</span></span>
<span class="line"><span style="color:#D4D4D4;">           </span><span style="color:#569CD6;"> fastcgi_index </span><span style="color:#D4D4D4;"> index.php;</span></span>
<span class="line"><span style="color:#D4D4D4;">           </span><span style="color:#569CD6;"> fastcgi_param </span><span style="color:#D4D4D4;"> SCRIPT_FILENAME  /data/data/com.termux/files/usr/share/nginx/html$</span><span style="color:#9CDCFE;">fastcgi_script_name</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">           </span><span style="color:#569CD6;"> include </span><span style="color:#D4D4D4;">       fastcgi_params;</span></span>
<span class="line"><span style="color:#D4D4D4;">        }</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><p>下面打开页面 <code>http://localhost:8080/kod/</code> 即可访问 KodBox。</p>`,42);function h(u,v){const a=o("router-link");return c(),i("div",null,[D,s("nav",d,[s("ul",null,[s("li",null,[l(a,{to:"#_1-开启-http-服务"},{default:p(()=>[n("1. 开启 HTTP 服务")]),_:1}),s("ul",null,[s("li",null,[l(a,{to:"#_1-1-使用-python"},{default:p(()=>[n("1.1 使用 Python")]),_:1})]),s("li",null,[l(a,{to:"#_1-2-使用-nginx"},{default:p(()=>[n("1.2 使用 Nginx")]),_:1})]),s("li",null,[l(a,{to:"#_1-3-使用-http-server"},{default:p(()=>[n("1.3 使用 http-server")]),_:1})])])]),s("li",null,[l(a,{to:"#_2-ftp-服务"},{default:p(()=>[n("2. FTP 服务")]),_:1}),s("ul",null,[s("li",null,[l(a,{to:"#_2-1-sftp-服务器"},{default:p(()=>[n("2.1 SFTP 服务器")]),_:1})])])]),s("li",null,[l(a,{to:"#_3-第三方应用"},{default:p(()=>[n("3. 第三方应用")]),_:1}),s("ul",null,[s("li",null,[l(a,{to:"#_3-1-kodbox"},{default:p(()=>[n("3.1 KodBox")]),_:1})])])])])]),y])}const b=e(t,[["render",h],["__file","share-file.html.vue"]]);export{b as default};
