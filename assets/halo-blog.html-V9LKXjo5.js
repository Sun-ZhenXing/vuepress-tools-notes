import{_ as e,r as p,o,c,b as s,d as n,a as l,e as r}from"./app-q2I5CAs-.js";const D={},i=s("h1",{id:"halo-博客搭建",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#halo-博客搭建","aria-hidden":"true"},"#"),n(" Halo 博客搭建")],-1),t={href:"https://halo.run/",target:"_blank",rel:"noopener noreferrer"},d=s("p",null,"Halo 现在有版本 1.x 和 2.x，这两者并不兼容，插件生态有区别，可以根据需求选择。",-1),y={href:"https://docs.halo.run/getting-started/install/docker-compose/",target:"_blank",rel:"noopener noreferrer"},m=r(`<div class="language-bash" data-ext="sh"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;">mkdir</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">~/halo</span><span style="color:#D4D4D4;"> &amp;&amp; </span><span style="color:#DCDCAA;">cd</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">~/halo</span></span>
<span class="line"></span></code></pre></div><p>复制上述文档中的 <code>docker-compose.yml</code> 文件到当前目录。</p><p>可以选择和 MySQL、PostgreSQL 配置项目：</p><ul><li><code>--halo.external-url=https://example.com/</code>：配置访问地址，如果不配置无法使用</li><li><code>--spring.r2dbc.password=...</code>：配置数据库密码，两个地方都需要改</li><li><code>--halo.security.initializer.superadminusername=admin</code>：配置管理员用户名</li><li><code>--halo.security.initializer.superadminpassword=...</code>：配置管理员密码</li></ul><p>然后配置一个 Nginx 反向代理，在宿主机上可用的配置如下：</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#569CD6;">user </span><span style="color:#D4D4D4;">www-data;</span></span>
<span class="line"><span style="color:#569CD6;">worker_processes </span><span style="color:#D4D4D4;">auto;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">events</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#569CD6;"> worker_connections </span><span style="color:#D4D4D4;">768;</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">http</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">   </span><span style="color:#569CD6;"> client_max_body_size </span><span style="color:#D4D4D4;">128m;</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">server</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">       </span><span style="color:#569CD6;"> listen </span><span style="color:#D4D4D4;">80;</span></span>
<span class="line"><span style="color:#D4D4D4;">       </span><span style="color:#569CD6;"> server_name </span><span style="color:#D4D4D4;">www.example.com example.com;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#B5CEA8;">301</span><span style="color:#D4D4D4;"> https://example.com$</span><span style="color:#9CDCFE;">request_uri</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">server</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">       </span><span style="color:#569CD6;"> listen </span><span style="color:#D4D4D4;">443 ssl;</span></span>
<span class="line"><span style="color:#D4D4D4;">       </span><span style="color:#569CD6;"> server_name </span><span style="color:#D4D4D4;">www.example.com;</span></span>
<span class="line"><span style="color:#D4D4D4;">       </span><span style="color:#569CD6;"> ssl_certificate </span><span style="color:#D4D4D4;">cert/example.com.pem;</span></span>
<span class="line"><span style="color:#D4D4D4;">       </span><span style="color:#569CD6;"> ssl_certificate_key </span><span style="color:#D4D4D4;">cert/example.com.key;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#C586C0;">return</span><span style="color:#D4D4D4;"> </span><span style="color:#B5CEA8;">301</span><span style="color:#D4D4D4;"> https://example.com$</span><span style="color:#9CDCFE;">request_uri</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">server</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">       </span><span style="color:#569CD6;"> listen </span><span style="color:#D4D4D4;">443 ssl;</span></span>
<span class="line"><span style="color:#D4D4D4;">       </span><span style="color:#569CD6;"> server_name </span><span style="color:#D4D4D4;">example.com;</span></span>
<span class="line"><span style="color:#D4D4D4;">       </span><span style="color:#569CD6;"> ssl_certificate </span><span style="color:#D4D4D4;">cert/example.com.pem;</span></span>
<span class="line"><span style="color:#D4D4D4;">       </span><span style="color:#569CD6;"> ssl_certificate_key </span><span style="color:#D4D4D4;">cert/example.com.key;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">location</span><span style="color:#D4D4D4;"> / {</span></span>
<span class="line"><span style="color:#D4D4D4;">           </span><span style="color:#569CD6;"> proxy_pass </span><span style="color:#D4D4D4;">http://localhost:8090;</span></span>
<span class="line"><span style="color:#D4D4D4;">           </span><span style="color:#569CD6;"> proxy_set_header </span><span style="color:#D4D4D4;">Host $</span><span style="color:#9CDCFE;">host</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">           </span><span style="color:#569CD6;"> proxy_set_header </span><span style="color:#D4D4D4;">X-Real-IP $</span><span style="color:#9CDCFE;">remote_addr</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">           </span><span style="color:#569CD6;"> proxy_set_header </span><span style="color:#D4D4D4;">X-Forwarded-For $</span><span style="color:#9CDCFE;">proxy_add_x_forwarded_for</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#D4D4D4;">        }</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,6);function v(u,_){const a=p("ExternalLinkIcon");return o(),c("div",null,[i,s("p",null,[s("a",t,[n("Halo"),l(a)]),n(" 是个人博客系统。")]),d,s("p",null,[n("建议 "),s("a",y,[n("使用 Docker Compose 部署 Halo"),l(a)]),n("。")]),m])}const C=e(D,[["render",v],["__file","halo-blog.html.vue"]]);export{C as default};
