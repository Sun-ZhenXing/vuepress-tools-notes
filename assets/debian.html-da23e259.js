import{_ as e,r as o,o as c,c as r,b as s,a as l,w as p,d as a,e as t}from"./app-dc4e475d.js";const i={},D=s("h1",{id:"debian-服务器初始化",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#debian-服务器初始化","aria-hidden":"true"},"#"),a(" Debian 服务器初始化")],-1),d=s("p",null,[a("本文使用 "),s("strong",null,"Debian 12 (bookworm)"),a(" 操作系统，使用阿里云测试通过。")],-1),y={class:"table-of-contents"},u=t(`<h2 id="1-ecs-服务器操作初始化" tabindex="-1"><a class="header-anchor" href="#1-ecs-服务器操作初始化" aria-hidden="true">#</a> 1. ECS 服务器操作初始化</h2><h3 id="11-安装基础工具" tabindex="-1"><a class="header-anchor" href="#11-安装基础工具" aria-hidden="true">#</a> 1.1 安装基础工具</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#6A9955;"># 更新软件</span></span>
<span class="line"><span style="color:#DCDCAA;">apt</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">update</span></span>
<span class="line"><span style="color:#DCDCAA;">apt</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">upgrade</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">-y</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># 支持 HTTPS 源和 GPG</span></span>
<span class="line"><span style="color:#DCDCAA;">apt</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">install</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">apt-transport-https</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">ca-certificates</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">gnupg</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">gnupg2</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">-y</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># 其他核心支持</span></span>
<span class="line"><span style="color:#DCDCAA;">apt</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">install</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">sudo</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">dirmngr</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">software-properties-common</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">-y</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># 安装常见工具</span></span>
<span class="line"><span style="color:#DCDCAA;">apt</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">install</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">vim</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">wget</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">curl</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">git</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">zip</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">unzip</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">tar</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">-y</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="12-新建用户" tabindex="-1"><a class="header-anchor" href="#12-新建用户" aria-hidden="true">#</a> 1.2 新建用户</h3><p>新建 <code>admin</code> 用户，方便权限管理：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;">useradd</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">-r</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">-m</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">-s</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">/bin/bash</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">admin</span></span>
<span class="line"><span style="color:#6A9955;"># 如果提示输入密码则输入密码</span></span>
<span class="line"><span style="color:#6A9955;"># 如果没有提示则使用下面的命令修改密码</span></span>
<span class="line"><span style="color:#6A9955;"># passwd admin</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># 设置 sudo 免密码</span></span>
<span class="line"><span style="color:#DCDCAA;">visudo</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># 将下面这一行放到 %sudo 下面</span></span>
<span class="line"><span style="color:#6A9955;"># admin   ALL=(ALL:ALL) NOPASSWD: ALL</span></span>
<span class="line"><span style="color:#6A9955;"># 保存并退出：^O，回车，^X</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># 进入 admin 用户</span></span>
<span class="line"><span style="color:#DCDCAA;">su</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">admin</span></span>
<span class="line"><span style="color:#DCDCAA;">cd</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="13-安装-docker" tabindex="-1"><a class="header-anchor" href="#13-安装-docker" aria-hidden="true">#</a> 1.3 安装 Docker</h3><div class="language-bash" data-ext="sh"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;">curl</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">-fsSL</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">https://get.docker.com</span><span style="color:#D4D4D4;"> | </span><span style="color:#DCDCAA;">bash</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">-s</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">docker</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">--mirror</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">Aliyun</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># 将当前用户加入docker用户组</span></span>
<span class="line"><span style="color:#DCDCAA;">sudo</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">gpasswd</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">-a</span><span style="color:#D4D4D4;"> \${</span><span style="color:#9CDCFE;">USER</span><span style="color:#D4D4D4;">} </span><span style="color:#CE9178;">docker</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># 更新 Docker Daemon 配置，使得后续 docker 操作无需 sudo</span></span>
<span class="line"><span style="color:#DCDCAA;">sudo</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">sed</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">-i</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">s/SocketMode=</span><span style="color:#B5CEA8;">0660</span><span style="color:#CE9178;">/SocketMode=</span><span style="color:#B5CEA8;">0666</span><span style="color:#CE9178;">/g</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">/usr/lib/systemd/system/docker.socket</span></span>
<span class="line"><span style="color:#DCDCAA;">sudo</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">systemctl</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">daemon-reload</span></span>
<span class="line"><span style="color:#DCDCAA;">sudo</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">systemctl</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">restart</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">docker.socket</span></span>
<span class="line"></span></code></pre></div><p>Docker 已经全面停止了 Docker Compose V1 的支持，并且已经集成了 Docker Compose V2，只需要 <code>docker compose</code> 命令即可使用。</p><h3 id="14-使用-swap-文件" tabindex="-1"><a class="header-anchor" href="#14-使用-swap-文件" aria-hidden="true">#</a> 1.4 使用 Swap 文件</h3><p>下面进入 <code>root</code> 用户操作：</p><div class="language-bash" data-ext="sh"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;">sudo</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">su</span></span>
<span class="line"></span></code></pre></div><p>查看服务器是否提供了 Swap 分区：</p><div class="language-bash" data-ext="sh"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;">free</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">-h</span></span>
<span class="line"></span></code></pre></div><p>如果没有提供 Swap 分区，可以使用下面的命令创建 Swap 文件：</p><div class="language-bash" data-ext="sh"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#6A9955;"># 4096000 = 4G，如果需要可以修改为其他数值</span></span>
<span class="line"><span style="color:#DCDCAA;">dd</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">if=/dev/zero</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">of=/var/swap</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">bs=</span><span style="color:#B5CEA8;">1024</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">count=</span><span style="color:#B5CEA8;">4096000</span></span>
<span class="line"><span style="color:#DCDCAA;">mkswap</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">/var/swap</span></span>
<span class="line"><span style="color:#DCDCAA;">chmod</span><span style="color:#D4D4D4;"> </span><span style="color:#B5CEA8;">0600</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">/var/swap</span></span>
<span class="line"><span style="color:#DCDCAA;">swapon</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">/var/swap</span></span>
<span class="line"><span style="color:#DCDCAA;">echo</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&quot;/var/swap swap swap defaults 0 0&quot;</span><span style="color:#D4D4D4;"> &gt;&gt; </span><span style="color:#CE9178;">/etc/fstab</span></span>
<span class="line"></span></code></pre></div><h3 id="15-常见别名" tabindex="-1"><a class="header-anchor" href="#15-常见别名" aria-hidden="true">#</a> 1.5 常见别名</h3><p>你可以给每个用户分别设置别名：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#6A9955;"># 常见目录操作别名</span></span>
<span class="line"><span style="color:#DCDCAA;">echo</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&quot;alias ll=&#39;ls -alF&#39;&quot;</span><span style="color:#D4D4D4;"> &gt;&gt; </span><span style="color:#CE9178;">~/.bashrc</span></span>
<span class="line"><span style="color:#DCDCAA;">echo</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&quot;alias la=&#39;ls -A&#39;&quot;</span><span style="color:#D4D4D4;"> &gt;&gt; </span><span style="color:#CE9178;">~/.bashrc</span></span>
<span class="line"><span style="color:#DCDCAA;">echo</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&quot;alias l=&#39;ls -CF&#39;&quot;</span><span style="color:#D4D4D4;"> &gt;&gt; </span><span style="color:#CE9178;">~/.bashrc</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># docker-compose 别名</span></span>
<span class="line"><span style="color:#DCDCAA;">echo</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&quot;alias docker-compose=&#39;docker compose&#39;&quot;</span><span style="color:#D4D4D4;"> &gt;&gt; </span><span style="color:#CE9178;">~/.bashrc</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># 更新软件</span></span>
<span class="line"><span style="color:#DCDCAA;">echo</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&quot;alias up=&#39;sudo apt update &amp;&amp; sudo apt upgrade -y &amp;&amp; sudo apt dist-upgrade -y &amp;&amp; sudo apt autoremove -y &amp;&amp; sudo apt autoclean -y&#39;&quot;</span><span style="color:#D4D4D4;"> &gt;&gt; </span><span style="color:#CE9178;">~/.bashrc</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># 刷新配置</span></span>
<span class="line"><span style="color:#DCDCAA;">source</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">~/.bashrc</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="2-轻量应用服务器" tabindex="-1"><a class="header-anchor" href="#2-轻量应用服务器" aria-hidden="true">#</a> 2. 轻量应用服务器</h2><p>安装基础工具与 <a href="#11-%E5%AE%89%E8%A3%85%E5%9F%BA%E7%A1%80%E5%B7%A5%E5%85%B7">1.1 安装基础工具</a> 一致。</p><p>定义别名的方式与 <a href="#15-%E5%B8%B8%E8%A7%81%E5%88%AB%E5%90%8D">1.5 常见别名</a> 一致。</p><p>轻量应用服务器已经包含了 <code>admin</code> 用户，直接进入 <code>admin</code> 用户：</p><div class="language-bash" data-ext="sh"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;">su</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">admin</span></span>
<span class="line"></span></code></pre></div><p>安装 Docker 与 <a href="#13-%E5%AE%89%E8%A3%85-docker">1.3 安装 Docker</a> 一致。</p><p>使用 Swap 文件与 <a href="#14-%E4%BD%BF%E7%94%A8-swap-%E6%96%87%E4%BB%B6">1.4 使用 Swap 文件</a> 一致。</p>`,26);function C(v,E){const n=o("router-link");return c(),r("div",null,[D,d,s("nav",y,[s("ul",null,[s("li",null,[l(n,{to:"#1-ecs-服务器操作初始化"},{default:p(()=>[a("1. ECS 服务器操作初始化")]),_:1}),s("ul",null,[s("li",null,[l(n,{to:"#11-安装基础工具"},{default:p(()=>[a("1.1 安装基础工具")]),_:1})]),s("li",null,[l(n,{to:"#12-新建用户"},{default:p(()=>[a("1.2 新建用户")]),_:1})]),s("li",null,[l(n,{to:"#13-安装-docker"},{default:p(()=>[a("1.3 安装 Docker")]),_:1})]),s("li",null,[l(n,{to:"#14-使用-swap-文件"},{default:p(()=>[a("1.4 使用 Swap 文件")]),_:1})]),s("li",null,[l(n,{to:"#15-常见别名"},{default:p(()=>[a("1.5 常见别名")]),_:1})])])]),s("li",null,[l(n,{to:"#2-轻量应用服务器"},{default:p(()=>[a("2. 轻量应用服务器")]),_:1})])])]),u])}const b=e(i,[["render",C],["__file","debian.html.vue"]]);export{b as default};
