import{_ as i,M as o,p as d,q as k,R as a,N as e,V as n,t as s,a1 as u}from"./framework-546207d5.js";const _={},h=a("h1",{id:"docker-搭建-mysql-环境",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#docker-搭建-mysql-环境","aria-hidden":"true"},"#"),s(" Docker 搭建 MySQL 环境")],-1),b={class:"table-of-contents"},v=u(`<h2 id="_1-基本使用" tabindex="-1"><a class="header-anchor" href="#_1-基本使用" aria-hidden="true">#</a> 1. 基本使用</h2><p>将 <code>root_password</code> 替换为自己的密码，然后执行以下命令：</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> pull mysql:8.0.32
<span class="token function">docker</span> run <span class="token parameter variable">-itd</span> <span class="token punctuation">\\</span>
    <span class="token parameter variable">--name</span> mysql80 <span class="token punctuation">\\</span>
    <span class="token parameter variable">-p</span> <span class="token number">3306</span>:3306 <span class="token punctuation">\\</span>
    <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span>root_password <span class="token punctuation">\\</span>
    <span class="token parameter variable">-e</span> <span class="token assign-left variable">TZ</span><span class="token operator">=</span>Asia/Shanghai <span class="token punctuation">\\</span>
    mysql:8.0.32
</code></pre></div><p>进入容器：</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> mysql80 /bin/bash
</code></pre></div><h2 id="_2-权限问题" tabindex="-1"><a class="header-anchor" href="#_2-权限问题" aria-hidden="true">#</a> 2. 权限问题</h2><p>外部无法连接，报错：</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>Access denied <span class="token keyword">for</span> user <span class="token string">&#39;root&#39;</span>@<span class="token string">&#39;172.17.0.1&#39;</span> <span class="token punctuation">(</span>using password: YES<span class="token punctuation">)</span>&quot;<span class="token punctuation">)</span>
</code></pre></div><p>原因：容器内部的 MySQL 服务没有对外部连接授权，需要授权。</p><p>如果没有创建容器或需要新建容器，可以指定 <code>MYSQL_ROOT_HOST</code> 的值为 <code>%</code>，这样容器内部的 MySQL 服务就会对外部连接授权。</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-itd</span> <span class="token punctuation">\\</span>
    <span class="token parameter variable">--name</span> mysql80 <span class="token punctuation">\\</span>
    <span class="token parameter variable">-p</span> <span class="token number">3306</span>:3306 <span class="token punctuation">\\</span>
    <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span>root_password <span class="token punctuation">\\</span>
    <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_HOST</span><span class="token operator">=</span>% <span class="token punctuation">\\</span>
    <span class="token parameter variable">-e</span> <span class="token assign-left variable">TZ</span><span class="token operator">=</span>Asia/Shanghai <span class="token punctuation">\\</span>
    mysql:8.0.32
</code></pre></div><p>如果已经创建了容器，可以通过以下命令授权：</p>`,12),g=a("div",{class:"language-sql","data-ext":"sql"},[a("pre",{class:"language-sql"},[a("code",null,[a("span",{class:"token keyword"},"GRANT"),s(),a("span",{class:"token keyword"},"ALL"),s(),a("span",{class:"token keyword"},"PRIVILEGES"),s(),a("span",{class:"token keyword"},"ON"),s(),a("span",{class:"token operator"},"*"),a("span",{class:"token punctuation"},"."),a("span",{class:"token operator"},"*"),s(),a("span",{class:"token keyword"},"TO"),s(),a("span",{class:"token string"},"'root'"),a("span",{class:"token variable"},"@'%'"),s(" IDENTIFIED "),a("span",{class:"token keyword"},"BY"),s(),a("span",{class:"token string"},"'password'"),s(),a("span",{class:"token keyword"},"WITH"),s(),a("span",{class:"token keyword"},"GRANT"),s(),a("span",{class:"token keyword"},"OPTION"),a("span",{class:"token punctuation"},";"),s(`
FLUSH `),a("span",{class:"token keyword"},"PRIVILEGES"),a("span",{class:"token punctuation"},";"),s(`
`)])])],-1),m=a("div",{class:"language-sql","data-ext":"sql"},[a("pre",{class:"language-sql"},[a("code",null,[a("span",{class:"token keyword"},"ALTER"),s(),a("span",{class:"token keyword"},"USER"),s(),a("span",{class:"token string"},"'root'"),a("span",{class:"token variable"},"@'%'"),s(" IDENTIFIED "),a("span",{class:"token keyword"},"WITH"),s(" mysql_native_password "),a("span",{class:"token keyword"},"BY"),s(),a("span",{class:"token string"},"'password'"),a("span",{class:"token punctuation"},";"),s(`
FLUSH `),a("span",{class:"token keyword"},"PRIVILEGES"),a("span",{class:"token punctuation"},";"),s(`
`)])])],-1);function y(S,w){const t=o("router-link"),p=o("CodeTabs");return d(),k("div",null,[h,a("nav",b,[a("ul",null,[a("li",null,[e(t,{to:"#_1-基本使用"},{default:n(()=>[s("1. 基本使用")]),_:1})]),a("li",null,[e(t,{to:"#_2-权限问题"},{default:n(()=>[s("2. 权限问题")]),_:1})])])]),v,e(p,{id:"34",data:[{title:"MySQL 5.7"},{title:"MySQL 8.0"}],"tab-id":"mysql"},{tab0:n(({title:l,value:c,isActive:r})=>[g]),tab1:n(({title:l,value:c,isActive:r})=>[m]),_:1},8,["data"])])}const q=i(_,[["render",y],["__file","mysql-env.html.vue"]]);export{q as default};
