import{u as G,y as Z,a as R,A as $,m as _,b as ee,l as te,s as le,n as oe,o as ae,e as re,c as se,h as ne,r as P,d as ie,H as ue,x as Q,f as ce}from"./app-d4ca8228.js";import{r as b,h as E,c as de,u as ve,ab as he,o as fe,I as pe,j as i,a5 as Y,z as ge,K as me,i as ye}from"./framework-8980b429.js";function we(t){if(Array.isArray(t)){for(var e=0,l=Array(t.length);e<t.length;e++)l[e]=t[e];return l}else return Array.from(t)}var J=!1;if(typeof window<"u"){var A={get passive(){J=!0}};window.addEventListener("testPassive",null,A),window.removeEventListener("testPassive",null,A)}var I=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1),w=[],D=!1,V=-1,H=void 0,S=void 0,K=function(e){return w.some(function(l){return!!(l.options.allowTouchMove&&l.options.allowTouchMove(e))})},B=function(e){var l=e||window.event;return K(l.target)||l.touches.length>1?!0:(l.preventDefault&&l.preventDefault(),!1)},be=function(e){if(S===void 0){var l=!!e&&e.reserveScrollBarGap===!0,o=window.innerWidth-document.documentElement.clientWidth;l&&o>0&&(S=document.body.style.paddingRight,document.body.style.paddingRight=o+"px")}H===void 0&&(H=document.body.style.overflow,document.body.style.overflow="hidden")},He=function(){S!==void 0&&(document.body.style.paddingRight=S,S=void 0),H!==void 0&&(document.body.style.overflow=H,H=void 0)},Se=function(e){return e?e.scrollHeight-e.scrollTop<=e.clientHeight:!1},je=function(e,l){var o=e.targetTouches[0].clientY-V;return K(e.target)?!1:l&&l.scrollTop===0&&o>0||Se(l)&&o<0?B(e):(e.stopPropagation(),!0)},ke=function(e,l){if(!e){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(!w.some(function(a){return a.targetElement===e})){var o={targetElement:e,options:l||{}};w=[].concat(we(w),[o]),I?(e.ontouchstart=function(a){a.targetTouches.length===1&&(V=a.targetTouches[0].clientY)},e.ontouchmove=function(a){a.targetTouches.length===1&&je(a,e)},D||(document.addEventListener("touchmove",B,J?{passive:!1}:void 0),D=!0)):be(l)}},Ee=function(){I?(w.forEach(function(e){e.targetElement.ontouchstart=null,e.targetElement.ontouchmove=null}),D&&(document.removeEventListener("touchmove",B,J?{passive:!1}:void 0),D=!1),V=-1):He(),w=[]};const De="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",Be="search-pro-history-results",m=G(Be,[]),Le=()=>({history:m,addHistory:t=>{m.value.length<P?m.value=[t,...m.value]:m.value=[t,...m.value.slice(0,P-1)]},removeHistory:t=>{m.value=[...m.value.slice(0,t),...m.value.slice(t+1)]}}),Te=b(De),Me=E(()=>JSON.parse(Z(Te.value))),k=(t,e)=>{const l=t.toLowerCase(),o=e.toLowerCase(),a=[];let s=0,v=0;const h=(r,f=!1)=>{let n="";v===0?n=r.length>20?`… ${r.slice(-20)}`:r:f?n=r.length+v>100?`${r.slice(0,100-v)}… `:r:n=r.length>20?`${r.slice(0,20)} … ${r.slice(-20)}`:r,n&&a.push(n),v+=n.length,f||(a.push(["strong",e]),v+=e.length,v>=100&&a.push(" …"))};let p=l.indexOf(o,s);if(p===-1)return null;for(;p>=0;){const r=p+o.length;if(h(t.slice(s,p)),s=r,v>100)break;p=l.indexOf(o,s)}return v<100&&h(t.slice(s),!0),a},z=t=>t.reduce((e,{type:l})=>e+(l==="title"?50:l==="heading"?20:l==="custom"?10:1),0),Je=(t,e)=>{var l;const o={};for(const[a,s]of Q(e)){const v=((l=e[a.replace(/\/[^\\]*$/,"")])==null?void 0:l.title)||"",h=`${v?`${v} > `:""}${s.title}`,p=k(s.title,t);p&&(o[h]=[...o[h]||[],{type:"title",path:a,display:p}]),s.customFields&&Q(s.customFields).forEach(([r,f])=>{f.forEach(n=>{const u=k(n,t);u&&(o[h]=[...o[h]||[],{type:"custom",path:a,index:r,display:u}])})});for(const r of s.contents){const f=k(r.header,t);f&&(o[h]=[...o[h]||[],{type:"heading",path:a+(r.slug?`#${r.slug}`:""),display:f}]);for(const n of r.contents){const u=k(n,t);u&&(o[h]=[...o[h]||[],{type:"content",header:r.header,path:a+(r.slug?`#${r.slug}`:""),display:u}])}}}return ce(o).sort((a,s)=>z(o[a])-z(o[s])).map(a=>({title:a,contents:o[a]}))},Ve=t=>{const e=R(),l=b([]),o=E(()=>Me.value[e.value]),a=ie(s=>{l.value=s?Je(s,o.value):[]},ue);return ge([t,e],()=>{a(t.value)}),l};var We=de({name:"SearchResult",props:{query:{type:String,required:!0}},emits:{close:()=>!0,updateQuery:t=>!0},setup(t,{emit:e}){const l=se(),o=ve(),a=R(),s=$(_),{history:v,addHistory:h,removeHistory:p}=Le(),r=he(t,"query"),f=Ve(r),n=b(0),u=b(0),U=b(),L=E(()=>f.value.length>0),T=E(()=>f.value[n.value]||null),x=()=>{n.value=n.value>0?n.value-1:f.value.length-1,u.value=T.value.contents.length-1},C=()=>{n.value=n.value<f.value.length-1?n.value+1:0,u.value=0},O=()=>{u.value<T.value.contents.length-1?u.value=u.value+1:C()},q=()=>{u.value>0?u.value=u.value-1:x()},X=c=>c.map(d=>ye(d)?d:i(d[0],d[1])),W=c=>{if(c.type==="custom"){const d=ne[c.index]||"$content",[y,j=""]=me(d)?d[a.value].split("$content"):d.split("$content");return X([y,...c.display,j])}return X(c.display)},M=()=>{n.value=0,u.value=0,e("updateQuery",""),e("close")};return fe(()=>{ee("keydown",c=>{if(L.value){if(c.key==="ArrowUp")q();else if(c.key==="ArrowDown")O();else if(c.key==="Enter"){const d=T.value.contents[u.value];l.value.path!==d.path&&(h(d),o.push(d.path),M())}}}),ke(U.value,{reserveScrollBarGap:!0})}),pe(()=>{Ee()}),()=>i("div",{class:["search-pro-result",{empty:r.value===""?v.value.length===0:!L.value}],ref:U},r.value===""?v.value.length?i("ul",{class:"search-pro-result-list"},i("li",{class:"search-pro-result-list-item"},[i("div",{class:"search-pro-result-title"},s.value.history),v.value.map((c,d)=>i(Y,{to:c.path,class:["search-pro-result-item",{active:u.value===d}],onClick:()=>{M()}},()=>[i(te,{class:"search-pro-result-type"}),i("div",{class:"search-pro-result-content"},[c.type==="content"&&c.header?i("div",{class:"content-header"},c.header):null,i("div",W(c))]),i("button",{class:"search-pro-close-icon",onClick:y=>{y.preventDefault(),y.stopPropagation(),p(d)}},i(le))]))])):s.value.emptyHistory:L.value?i("ul",{class:"search-pro-result-list"},f.value.map(({title:c,contents:d},y)=>{const j=n.value===y;return i("li",{class:["search-pro-result-list-item",{active:j}]},[i("div",{class:"search-pro-result-title"},c||"Documentation"),d.map((g,N)=>{const F=j&&u.value===N;return i(Y,{to:g.path,class:["search-pro-result-item",{active:F,"aria-selected":F}],onClick:()=>{h(g),M()}},()=>[g.type==="content"?null:i(g.type==="title"?oe:g.type==="heading"?ae:re,{class:"search-pro-result-type"}),i("div",{class:"search-pro-result-content"},[g.type==="content"&&g.header?i("div",{class:"content-header"},g.header):null,i("div",W(g))])])})])})):s.value.emptyResult)}});export{We as default};
